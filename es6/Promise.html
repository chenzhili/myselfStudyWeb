<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta type="viewport" content="width=device-width,initial-scale=1">
	<title>对于promise的理解</title>
</head>
<body>
<h1>promise的理解</h1>
<script type="text/javascript">
	(function es6(){
		let n = 0;
		function proFn1(){
			return new Promise((resolve,reject)=>{
				console.log("第一个");
				resolve(n);
				n++;
			});
		}
		function proFn2(){
			return new Promise((resolve,reject)=>{
				console.log("第二个");
				/*resolve(2);*/
				reject("第二个有问题"+n);
				n++;
			});
		}
		function proFn3(){
			return new Promise((resolve,reject)=>{
				console.log("第三个");
				resolve(n);
				n++;
			});
		}
		function proFn4(){
			return new Promise((resolve,reject)=>{
				console.log("第四个");
				resolve(n);
				n++;
				
			});
		}
		proFn1()
		.then(proFn2)
		.then(proFn3)
		.then(data=>{console.log(data);})
		.catch(err=>{
			console.log(err);
		});
	})();
	var p1 = new Promise(function (resolve, reject) {
setTimeout(() => resolve(new Error('fail')), 3000)
})
var p2 = new Promise(function (resolve, reject) {
setTimeout(() => resolve(p1), 1000)
})
p2
.then(result => console.log(result),(err)=>console.log(err))
/*.then(resutl=>console.log(resutl),err=>console.log(err));*/
.catch(error => console.log(error))//下面是为了捕捉最后promis返回的数据，不管是对还是错
</script>
</body>
</html>